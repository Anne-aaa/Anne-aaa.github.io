<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Anne&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="ğŸ‘‹ Hi, this is Anne, a software developer with expertise in [Kotlin&#x2F;Java &amp; Spring Boot]. My Github Page:https:&#x2F;&#x2F;github.com&#x2F;Anne-aaa">
<meta property="og:type" content="website">
<meta property="og:title" content="Anne&#39;s Blog">
<meta property="og:url" content="https://anne-aaa.github.io/index.html">
<meta property="og:site_name" content="Anne&#39;s Blog">
<meta property="og:description" content="ğŸ‘‹ Hi, this is Anne, a software developer with expertise in [Kotlin&#x2F;Java &amp; Spring Boot]. My Github Page:https:&#x2F;&#x2F;github.com&#x2F;Anne-aaa">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Anne">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Anne's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Anne&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://anne-aaa.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-backend/æ¶æ„" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/24/backend/%E6%9E%B6%E6%9E%84/" class="article-date">
  <time class="dt-published" datetime="2024-05-24T08:03:00.000Z" itemprop="datePublished">2024-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/24/backend/%E6%9E%B6%E6%9E%84/">æ¶æ„</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="ç»å…¸ä¸‰å±‚æ¶æ„"><a href="#ç»å…¸ä¸‰å±‚æ¶æ„" class="headerlink" title="ç»å…¸ä¸‰å±‚æ¶æ„"></a>ç»å…¸ä¸‰å±‚æ¶æ„</h3><h3 id="DDDåˆ†å±‚æ¶æ„"><a href="#DDDåˆ†å±‚æ¶æ„" class="headerlink" title="DDDåˆ†å±‚æ¶æ„"></a>DDDåˆ†å±‚æ¶æ„</h3><p>å…¶å®ä¹‹å‰é¡¹ç›®ä¸Šç”¨çš„å°±æ˜¯DDDï¼Œä½†æ˜¯åˆ°ä»Šå¤©æˆ‘æ‰ä»å…¨è²Œå»ç†è§£å®ƒï¼Œç”¨ä¸€ä¸ªè®¢å•ç³»ç»Ÿä¸¾ä¾‹å­ã€‚ ä¸€ä¸ªè®¢å•ä¼šåŒ…å«å¤šä¸ªè®¢å•é¡¹ï¼Œè®¢å•çš„æ€»é‡‘é¢éœ€è¦æ˜¯è®¢å•é¡¹é‡‘é¢çš„ç´¯è®¡ï¼Œå› æ­¤ Order ä¸ OrderLineä¸åº”æ˜¯ä¸¤ä¸ªå•ç‹¬çš„ç±»ï¼Œ  ç”¨ <code>Aggregate</code> è¿™ä¸€æ¦‚å¿µæ¥å†™Orderï¼Œ å¤–éƒ¨é€šè¿‡Orderæ¥æ”¹OrderLineï¼Œé¿å…é”™è¯¯ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œèšåˆæ ¹çš„å­˜åœ¨æ˜¯ä¸ºäº†ï¼š å¤–éƒ¨å¯¹è±¡åªèƒ½é€šè¿‡èšåˆæ ¹æ¥è®¿é—®å’Œä¿®æ”¹èšåˆå†…éƒ¨çš„æ•°æ®ã€‚ç°åœ¨å†å›åˆ°è¿™ä¸ªæ¶æ„çš„åå­—ï¼šé¢†åŸŸé©±åŠ¨å¼€å‘</p>
<p><strong>åŒ…ä½ç½®ï¼š domain</strong></p>
<p>åŒ…ä½ç½®ï¼š domain&#x2F;models</p>
<p>Entity</p>
<ul>
<li>Order</li>
<li>OrderLine</li>
</ul>
<p>Value Objectï¼ˆå±æ€§æè¿°ï¼‰</p>
<ul>
<li>EffectivePeriod</li>
<li>Address</li>
</ul>
<p>Aggregate Root ï¼š å®ƒå®šä¹‰äº†ä¸€ä¸ªèšåˆ(Aggregate)çš„è¾¹ç•Œ,å¹¶ä½œä¸ºå¤–éƒ¨å¯¹è±¡è®¿é—®å’Œä¿®æ”¹èšåˆå†…éƒ¨å¯¹è±¡çš„å”¯ä¸€å…¥å£ã€‚</p>
<ul>
<li>InterestRateRequest å¯ä»¥ç†è§£æˆOrderAggregate</li>
</ul>
<p>Domain Service (é¢†åŸŸå±‚æœåŠ¡ä¸“æ³¨äºå®ç°æ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘)</p>
<p>åŒ…ä½ç½®ï¼š domain&#x2F;service</p>
<ul>
<li>OrderService</li>
</ul>
<p>åŒ…ä½ç½®ï¼š domain&#x2F;repository</p>
<ul>
<li>InterestRateRepository</li>
</ul>
<p>å…¶å®å…³äºè¿™ä¸€å±‚ï¼Œæˆ‘å¿˜è®°äº†å½“æ—¶é¡¹ç›®ä¸Šç”¨çš„èšåˆæ ¹çš„åœºæ™¯äº†ã€‚è¿˜æœ‰å…³äºé¢†åŸŸæœåŠ¡ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸Šä¼¼ä¹æ˜¯æ²¡æœ‰é¢†åŸŸæœåŠ¡çš„ï¼Œä¸šåŠ¡é€»è¾‘éƒ½æ˜¯å†™åœ¨åº”ç”¨å±‚çš„ã€‚ åªèƒ½è¯´è¿™é‡Œå†ä¹‹åå¤šçœ‹çœ‹ä»£ç ï¼Œå…·ä½“åœºæ™¯å…·ä½“åˆ†æäº†ã€‚è¿™é‡Œæˆ‘æœ‰çš„ç”¨äº†ä¸€äº›ä¹‹å‰é¡¹ç›®ä¸Šçš„ä»£ç ï¼Œå·²ç»ç»è¿‡è„±æ•å¤„ç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> OrderId id;</span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderLine&gt; orderLines;</span><br><span class="line">    <span class="keyword">private</span> Money totalAmount;</span><br><span class="line">    <span class="keyword">private</span> Address shippingAddress;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addOrderLine</span><span class="params">(OrderLine orderLine)</span> &#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ è®¢å•é¡¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">calculateTotalAmount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è®¡ç®—è®¢å•æ€»é‡‘é¢</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>èšåˆæ ¹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">AggregateRoot</span>&lt;<span class="type">T : AggregateRoot&lt;T</span>&gt;&gt; &#123;</span><br><span class="line">  <span class="keyword">val</span> id: Id&lt;T&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">InterestRateRequest</span>(</span><br><span class="line">  <span class="keyword">val</span> effectivePeriod: String,</span><br><span class="line">  <span class="keyword">val</span> rate: BigDecimal,</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> id: String</span><br><span class="line">) : AggregateRoot&lt;InterestRateRequest&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> log = LoggerFactory.getLogger(InterestRateRequest::<span class="keyword">class</span>.java)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">create</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">      rate: <span class="type">BigDecimal</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    )</span></span>: InterestRateRequest &#123;</span><br><span class="line">      <span class="keyword">if</span> (...) &#123;</span><br><span class="line">        log.warn(<span class="string">&quot;...&quot;</span>)</span><br><span class="line">        <span class="keyword">throw</span> BusinessException(</span><br><span class="line">          <span class="string">&quot;XXX&quot;</span>,</span><br><span class="line">          <span class="string">&quot;effective period is not match last one&quot;</span></span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (rate &gt; RATE_UPPER_LIMIT || rate &lt; RATE_LOWER_LIMIT) &#123;</span><br><span class="line">        log.warn(<span class="string">&quot;...&quot;</span>)</span><br><span class="line">        <span class="keyword">throw</span> BusinessException(</span><br><span class="line">          <span class="string">&quot;AAA&quot;</span>,</span><br><span class="line">          <span class="string">&quot;interest rate not input more than 100% or less than 0%&quot;</span></span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">val</span> startOfTomorrow = LocalDate.now().atStartOfDay().plusDays(<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span> (approvedOn.isBefore(startOfTomorrow)) &#123;</span><br><span class="line">        log.warn(<span class="string">&quot;...&quot;</span>)</span><br><span class="line">        <span class="keyword">throw</span> BusinessException(</span><br><span class="line">          <span class="string">&quot;BBB&quot;</span>,</span><br><span class="line">          <span class="string">&quot;approved on must be after tomorrow and beyond&quot;</span></span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> InterestRateRequest(</span><br><span class="line">        effectivePeriod = <span class="string">&quot;effectivePeriod&quot;</span>,</span><br><span class="line">        id = <span class="string">&quot;id&quot;</span></span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹å•å’Œæ”¯ä»˜çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">placeOrder</span><span class="params">(OrderAggregate orderAggregate, PaymentDetails paymentDetails)</span> &#123;</span><br><span class="line">        <span class="comment">// æ‰§è¡Œä¸‹å•ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> orderAggregate.getOrder();</span><br><span class="line">        order.setStatus(OrderStatus.PLACED);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œæ”¯ä»˜é€»è¾‘</span></span><br><span class="line">        processPayment(order, paymentDetails);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…¶ä»–ä¸‹å•ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processPayment</span><span class="params">(Order order, PaymentDetails paymentDetails)</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨æ”¯ä»˜ç½‘å…³è¿›è¡Œæ”¯ä»˜</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">paymentSuccessful</span> <span class="operator">=</span> callPaymentGateway(order, paymentDetails);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (paymentSuccessful) &#123;</span><br><span class="line">            order.setStatus(OrderStatus.PAID);</span><br><span class="line">            <span class="comment">// æ‰§è¡Œå…¶ä»–æ”¯ä»˜æˆåŠŸåçš„é€»è¾‘</span></span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            order.setStatus(OrderStatus.PAYMENT_FAILED);</span><br><span class="line">            <span class="comment">// æ‰§è¡Œæ”¯ä»˜å¤±è´¥åçš„é€»è¾‘</span></span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">FileRepository</span> &#123;</span><br><span class="line">  fun <span class="title function_">save</span><span class="params">(file: File)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒ…ä½ç½®ï¼šapplication</p>
<ul>
<li>PlaceOrderService   ï¼ˆä¹‹å‰åœ¨é¡¹ç›®ç»„ç”¨UseCaseä»£æ›¿è¿™é‡Œçš„Serviceï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PlaceOrderService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> OrderService orderService;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> OrderRepository orderRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PlaceOrderService</span><span class="params">(OrderService orderService, OrderRepository orderRepository)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.orderService = orderService;</span><br><span class="line">        <span class="built_in">this</span>.orderRepository = orderRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">placeOrder</span><span class="params">(PlaceOrderRequest request)</span> &#123;</span><br><span class="line">        <span class="type">OrderId</span> <span class="variable">orderId</span> <span class="operator">=</span> OrderId.next();</span><br><span class="line">        <span class="type">OrderAggregate</span> <span class="variable">orderAggregate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderAggregate</span>(orderId);</span><br><span class="line">        orderAggregate.setShippingAddress(request.getShippingAddress());</span><br><span class="line">        request.getOrderLines().forEach(ol -&gt; orderAggregate.addOrderLine(ol.getProduct(), ol.getQuantity()));</span><br><span class="line">        orderAggregate.submitOrder();</span><br><span class="line"></span><br><span class="line">        orderService.placeOrder(orderAggregate, request.getPaymentDetails());</span><br><span class="line"></span><br><span class="line">        orderRepository.save(orderAggregate);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒ…ä½ç½®ï¼š infrastructure</p>
<p>åŒ…ä½ç½®ï¼š infrastructure&#x2F;repository</p>
<ul>
<li>JooqInterestRateRequestRepository</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JooqInterestRateRequestRepository</span>(</span><br><span class="line">  <span class="keyword">private</span> val dslContext: DSLContext,</span><br><span class="line">) : InterestRateRequestRepository &#123;</span><br><span class="line">  <span class="type">val</span> <span class="variable">mapper</span> <span class="operator">=</span> MapperUtils.getMapper&lt;InterestRateRequestMapper&gt;()</span><br><span class="line"></span><br><span class="line">  override fun <span class="title function_">save</span><span class="params">(interestRateRequest: InterestRateRequest)</span> &#123;</span><br><span class="line">    mapper</span><br><span class="line">      .convertToRecord(interestRateRequest, dslContext.newRecord(PT_INTEREST_RATE_REQUEST))</span><br><span class="line">      .let &#123; dslContext.batchInsert(it).execute() &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>controllerå±‚éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘å°±çœç•¥ä¸å†™äº†ã€‚æˆ‘è®°å¾—å½“æ—¶æœ‰ä¸€ç§æƒ…å†µï¼Œå¦‚æœrepositoryè¦å¯¹æ•´ä¸ªèšåˆæ ¹è¿›è¡Œæ“ä½œã€‚ å¦‚æœä¸æ˜¯å¯¹æ•´ä¸ªèšåˆæ ¹æ“ä½œï¼Œæ˜¯æ”¾åˆ°å¦ä¸€ä¸ªåœ°æ–¹çš„ã€‚ä¾‹å­å¦‚ä¸‹ï¼š    å¹¶ä¸éœ€è¦æŸ¥å‡ºæ¥æ•´ä¸ªèšåˆæ ¹</p>
<p>åŒ…ä½ç½®: querymodel</p>
<p>åŒ…ä½ç½®ï¼šquerymodel&#x2F;repository</p>
<p>åŒ…ä½ç½®ï¼šquerymodel&#x2F;condition  æ‰€æœ‰å¯èƒ½çš„æŸ¥è¯¢æ¡ä»¶ç»„åˆè€Œæˆçš„æ•°æ®æ¨¡å‹</p>
<ul>
<li>CaseDocumentsCondition</li>
</ul>
<p>åŒ…ä½ç½®ï¼šquerymodel&#x2F;querymodel  æƒ³æŸ¥å‡ºæ¥çš„æ•°æ®æ¨¡å‹</p>
<ul>
<li>CaseDocumentQueryModel</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">CaseDocumentQueryModel</span>(</span><br><span class="line">  <span class="keyword">val</span> documentType: CaseDocumentType,</span><br><span class="line">  <span class="keyword">val</span> filename: String,</span><br><span class="line">  <span class="keyword">val</span> uploadedOn: LocalDateTime,</span><br><span class="line">  <span class="keyword">val</span> uploadedBy: UUID,</span><br><span class="line">  <span class="keyword">val</span> usedIn: CasePhase,</span><br><span class="line">  <span class="keyword">val</span> status: CaseDocumentStatus,</span><br><span class="line">  <span class="keyword">val</span> caseDocumentId: UUID</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">CaseDocumentsCondition</span>(</span><br><span class="line">  <span class="keyword">val</span> page: <span class="built_in">Int</span>,</span><br><span class="line">  <span class="keyword">val</span> size: <span class="built_in">Int</span>,</span><br><span class="line">  <span class="keyword">val</span> filenameSearchCondition: String? = <span class="literal">null</span>,</span><br><span class="line">  <span class="keyword">val</span> typeSearchCondition: String? = <span class="literal">null</span>,</span><br><span class="line">  <span class="keyword">val</span> startUploadedOnSearchCondition: LocalDate? = <span class="literal">null</span>,</span><br><span class="line">  <span class="keyword">val</span> uploadedBySearchCondition: String? = <span class="literal">null</span>,</span><br><span class="line">  <span class="keyword">val</span> statusSearchCondition: String? = <span class="literal">null</span>,</span><br><span class="line">  <span class="keyword">val</span> usedInSearchCondition: String? = <span class="literal">null</span>,</span><br><span class="line">  <span class="keyword">val</span> endUploadedOnSearchCondition: LocalDate? = <span class="literal">null</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">FileInfoQueryRepository</span> &#123;</span><br><span class="line">  <span class="function"><span class="keyword">fun</span> <span class="title">findDocumentBy</span><span class="params">(caseId: <span class="type">UUID</span>, condition: <span class="type">CaseDocumentsCondition</span>)</span></span>: CaseDocumentQueryModel</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Anyway, é¡¹ç›®ä¸Šçš„DDDæ¶æ„çœ‹èµ·æ¥ä¼šç¨å¾®ä¸ä¸€æ ·ä¸€ç‚¹ã€‚æ¯”å¦‚domain serviceæ²¡æ€ä¹ˆç”¨åˆ°ï¼Œä½†æ˜¯domainè¿˜ä¼šæ”¾repositoryçš„æ¥å£ã€‚  èšåˆæ ¹çš„ä½¿ç”¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¥½å¤šå®ä½“è¿˜æœ‰ä¸€ä¸ªæ¥å£æ”¾åœ¨domainé‡Œé¢ï¼ˆä¸çŸ¥é“ä¸ºå•¥)ã€‚ å®ä½“é‡Œé¢æ˜¯æœ‰æ–¹æ³•çš„ï¼ˆæ¯”å¦‚åœ¨requestè¿™ä¸ªå®ä½“é‡Œï¼Œå°è£…äº†åˆ¤æ–­rateæ˜¯å¦æ­£ç¡®ï¼Œä¸æ­£ç¡®æŠ¥é”™ï¼Œæ­£ç¡®æ‰è¿”å›çœŸæ­£çš„å®ä½“ã€‚  å…³äºè¿™ä¸€å—ï¼Œæˆ‘è®°å¾—ä¹Ÿæ˜¯æœ‰è¯´æ³•çš„ã€‚æ¯”å¦‚å°è£…åˆ°å®ä½“é‡Œï¼Œé‚£ä¹ˆä»åˆå§‹åŒ–å¼€å§‹ï¼Œå°±ä¸ä¼šç”Ÿæˆä¸å¯¹çš„è¿™ä¸ªå®ä½“ã€‚ å¦‚æœæŠŠè¿™äº›åˆ¤æ–­å°è£…åˆ°åˆ«çš„åœ°æ–¹ï¼Œä¼šå¯¹é€»è¾‘æœ‰ä¸€äº›ä¸åŒçš„å½±å“ï¼‰ã€‚</p>
<p>æ€»ç»“æ¥è¯´ï¼ŒDDDæ¯”èµ·ä¸‰å±‚ç»å…¸æ¶æ„æ¥è¯´ï¼Œå¤šäº†ä¸€å±‚domainï¼Œæ¥æ”¾ç½®æŠ½è±¡çš„infrastructureå±‚çš„æ¥å£ã€‚ ç°åœ¨å†çœ‹è¿™å¼ å›¾ï¼Œå°±è§‰å¾—æ›´ç†è§£ä¸€äº›äº†ï¼š</p>
<p><img src="/images/DDD1.png" alt="å›¾ç‰‡" title="Arch"><br>DDDä¸­å¤šçš„è¿™ä¸ªdomainçš„åŒ…ï¼š</p>
<p>åœ¨DDDä¸­,å¼ºè°ƒå»ºç«‹ä¸€ç§ç»Ÿä¸€çš„é¢†åŸŸè¯­è¨€ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­,å¼€å‘å›¢é˜Ÿå’Œé“¶è¡Œä¸šåŠ¡ä¸“å®¶éœ€è¦å°±â€è´¦æˆ·â€ã€â€å­˜æ¬¾â€ã€â€è´·æ¬¾â€ç­‰æ¦‚å¿µè¾¾æˆå…±è¯†,å½¢æˆä¸€å¥—ç»Ÿä¸€çš„æœ¯è¯­å’Œå®šä¹‰ã€‚ä¾‹å¦‚,ä»–ä»¬å¯èƒ½ä¼šçº¦å®š:</p>
<ul>
<li>â€œè´¦æˆ·â€æŒ‡çš„æ˜¯å®¢æˆ·åœ¨é“¶è¡Œå¼€ç«‹çš„è´¦å·,åŒ…æ‹¬å­˜æ¬¾è´¦æˆ·å’Œè´·æ¬¾è´¦æˆ·ã€‚</li>
<li>â€œå­˜æ¬¾â€æŒ‡çš„æ˜¯å®¢æˆ·å­˜å…¥é“¶è¡Œçš„èµ„é‡‘ã€‚</li>
<li>â€œè´·æ¬¾â€æŒ‡çš„æ˜¯é“¶è¡Œå‘å®¢æˆ·å‘æ”¾çš„å€Ÿæ¬¾ã€‚</li>
</ul>
<p>é€šè¿‡å»ºç«‹è¿™ç§ç»Ÿä¸€çš„é¢†åŸŸè¯­è¨€,å¼€å‘äººå‘˜å’Œä¸šåŠ¡ä¸“å®¶å°±èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªè¯­ä¹‰åŸºç¡€ä¸Šè¿›è¡Œäº¤æµå’Œè®¨è®º,å‡å°‘ç†è§£ä¸Šçš„åå·®ã€‚å½“å¼€å‘äººå‘˜åœ¨ç¼–å†™ä»£ç æ—¶,ä»–ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›çº¦å®šå¥½çš„æœ¯è¯­,è€Œä¸éœ€è¦è¿›è¡Œâ€ç¿»è¯‘â€ã€‚è¿™æ ·ä¸€æ¥,ä»£ç å°±èƒ½å¤Ÿæ›´å¥½åœ°åæ˜ ä¸šåŠ¡é¢†åŸŸçš„æ¦‚å¿µ,ä»è€Œç¡®ä¿ç³»ç»Ÿç¬¦åˆçœŸå®çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<p>ã€æœªå®Œå¾…ç»­..ã€‘</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://anne-aaa.github.io/2024/05/24/backend/%E6%9E%B6%E6%9E%84/" data-id="clwkeb9vq00095wpo9k7lh3zb" data-title="æ¶æ„" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">åç«¯</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Hexo+ Githubæ­å»ºä¸€ä¸ªä¸ªäººåšå®¢" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/21/Hexo+%20Github%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="article-date">
  <time class="dt-published" datetime="2024-05-21T07:18:47.000Z" itemprop="datePublished">2024-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/21/Hexo+%20Github%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">Hexo+ Githubæ­å»ºä¸€ä¸ªä¸ªäººåšå®¢</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="ä¸€-æ­å»ºæµç¨‹"><a href="#ä¸€-æ­å»ºæµç¨‹" class="headerlink" title="ä¸€. æ­å»ºæµç¨‹"></a>ä¸€. æ­å»ºæµç¨‹</h3><p>è¯¦æƒ…è§ï¼š<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/21193762">https://www.zhihu.com/question/21193762</a> å…³äºæ­å»ºçš„æµç¨‹ã€‚å†å‚è€ƒä¸€äº›åˆ«çš„ç»¼åˆä¸€ä¸‹ã€‚</p>
<p>å…·ä½“åŸç†æ˜¯ï¼Œå¯ä»¥å»ºç«‹masterå’Œhexoä¸¤ä¸ªåˆ†æ”¯ï¼Œhexoåˆ†æ”¯ç”¨æ¥å­˜æ”¾hexo initå‡ºæ¥çš„æœåŠ¡å™¨ï¼Œmasteræ˜¯hexoçš„é™æ€æ–‡ä»¶ç”Ÿæˆåéƒ¨ç½²åˆ°çš„åˆ†æ”¯ã€‚è¿™æ ·ï¼Œå³ä½¿æ¢ç”µè„‘ï¼Œä¹Ÿå¯ä»¥ç»§ç»­æŠŠä»£ç æ‹‰ä¸‹æ¥ï¼Œç»§ç»­ç”¨hexoå†™åšå®¢ã€‚</p>
<h3 id="äºŒ-è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜"><a href="#äºŒ-è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜" class="headerlink" title="äºŒ. è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜"></a>äºŒ. è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜</h3><p>ç”µè„‘æ˜¯mac ç³»ç»Ÿæ˜¯zshrcï¼Œç¯å¢ƒå˜é‡æ–‡ä»¶æ˜¯.zshrc</p>
<p>ç¯å¢ƒå˜é‡æœ€åä¸€è¡Œå†™çš„æ˜¯pnpm æ‰€ä»¥æˆ‘å¾—ç”¨pnpmå®‰è£…ï¼Œæ‰èƒ½è¯†åˆ«åˆ°è¿™ä¸ªcommand</p>
<h3 id="ä¸‰-æ—¥å¸¸æ”¹åŠ¨ï¼š"><a href="#ä¸‰-æ—¥å¸¸æ”¹åŠ¨ï¼š" class="headerlink" title="ä¸‰. æ—¥å¸¸æ”¹åŠ¨ï¼š"></a>ä¸‰. æ—¥å¸¸æ”¹åŠ¨ï¼š</h3><ol>
<li>ç›´æ¥æŠŠ.mdæ–‡ä»¶å¤åˆ¶åˆ°source&#x2F;_postæ–‡ä»¶å¤¹ä¸­ï¼Œå¤åˆ¶å®Œä¹‹åç„¶åä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å®ƒï¼Œåœ¨ç¬¬ä¸€è¡ŒåŠ ä¸Štitleã€‚ ä¹Ÿå¯ä»¥ç›´æ¥ hexo new ä¸€ç¯‡åšå®¢ã€‚ å›¾ç‰‡æ”¾åœ¨source&#x2F;imagesæ–‡ä»¶å¤¹ä¸­ï¼Œmdæ–‡æ¡£å†…ï¼Œä½¿ç”¨<img src="/%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80" alt="å›¾ç‰‡" title="å›¾ç‰‡title">çš„æ ¼å¼ï¼Œåœ†æ‹¬å·å†…çš„é“¾æ¥åœ°å€å†™(&#x2F;images&#x2F;name.jpeg)ã€‚<br>è¿™é‡Œçš„ &#x2F; æŒ‡çš„æ˜¯æ ¹ç›®å½•ï¼Œå¯¹äºhexoï¼Œèµ„æºæ–‡ä»¶çš„æ ¹ç›®å½•å°±æ˜¯sourceã€‚</li>
<li>åœ¨.gitç›®å½•ä¸‹ï¼Œä¾æ¬¡æ‰§è¡Œgit add .ã€git commit -m â€œâ€¦â€ã€git push origin hexoæŒ‡ä»¤å°†æ”¹åŠ¨æ¨é€åˆ°GitHubï¼ˆæ­¤æ—¶å½“å‰åˆ†æ”¯åº”ä¸ºhexo</li>
<li>è¦è¿›å…¥hexoè·Ÿç›®å½•ï¼ˆå’Œ_config.ymlåŒä¸€ç›®å½•ä¸‹ï¼‰ï¼Œåˆ é™¤æ—§çš„é™æ€æ–‡ä»¶ï¼Œå³ public æ–‡ä»¶<br>hexo cleanã€‚ ç„¶åæ‰æ‰§è¡Œ hexo d -g ç”Ÿæˆé™æ€æ–‡ä»¶å¹¶éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨,åˆ°masteråˆ†æ”¯ä¸Šã€‚ éœ€è¦ç­‰å¾…ä¸€ä¼šæ‰èƒ½è§åˆ°ã€‚<br>hexo så¯ä»¥å…ˆåœ¨æœ¬åœ°é¢„è§ˆã€‚</li>
</ol>
<p>æ³¨æ„é—®é¢˜1.</p>
<p>å¦‚æœä½ åœ¨è¿è¡Œ<code>hexo</code>å‘½ä»¤æ—¶å‡ºç°äº†<code>Usage</code>æç¤ºè€Œæ— æ³•æ‰§è¡Œåé¢çš„å­å‘½ä»¤, å¾ˆå¯èƒ½æ˜¯å› ä¸ºä½ å½“å‰æ‰€åœ¨çš„ç›®å½•ä¸æ˜¯ Hexo ç«™ç‚¹çš„æ ¹ç›®å½•ã€‚Hexo éœ€è¦åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰èƒ½æ­£ç¡®æ‰§è¡Œå‘½ä»¤ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://anne-aaa.github.io/2024/05/21/Hexo+%20Github%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" data-id="clwkeb9vi00005wpoejf12rif" data-title="Hexo+ Githubæ­å»ºä¸€ä¸ªä¸ªäººåšå®¢" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/" rel="tag">æ—¥å¸¸è®°å½•</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ç¬¬ä¸€æ¬¡åšå‰ç«¯ä¸­é‡åˆ°çš„é—®é¢˜è®°å½•" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/21/%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%81%9A%E5%89%8D%E7%AB%AF%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" class="article-date">
  <time class="dt-published" datetime="2024-05-20T16:00:00.000Z" itemprop="datePublished">2024-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/21/%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%81%9A%E5%89%8D%E7%AB%AF%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/">å‰ç«¯é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ol>
<li><p>Node.jsï¼š  Node.jsåˆ™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„JavaScriptè¿è¡Œç¯å¢ƒ,å®ƒå¯ä»¥è®©JavaScriptä»£ç è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯,è€Œä¸ä»…é™äºæµè§ˆå™¨,eg:</p>
 <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="property">statusCode</span> = <span class="number">200</span>;</span><br><span class="line">  res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>);</span><br><span class="line">  res.<span class="title function_">end</span>(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server running at http://localhost:3000/&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…³äºå¼‚æ­¥ï¼š</p>
</li>
</ol>
<p>Jestæµ‹è¯•jsxï¼Œ å…¶ä¸­findAllByTextè¿”å›çš„æ˜¯Promiseå¯¹è±¡ï¼ŒPromiseå¯¹è±¡æ˜¯å¼‚æ­¥æ“ä½œçš„æˆåŠŸæˆ–å¤±è´¥çš„ç»“æœã€‚ç°åœ¨åŠ å…³é”®å­—å˜æˆåŒæ­¥åï¼Œå³ç­‰åˆ°findAllByTextå…¨éƒ¨æ‰§è¡Œå®Œæ‰å¾€ä¸‹æ‰§è¡Œï¼Œå°±èƒ½å¾—åˆ°list, ä»è€Œå¾—åˆ°listçš„length.</p>
<p>è¿™é‡Œçš„mockä¹Ÿå€¼å¾—æ³¨æ„ã€‚jest.fn()å¯ä»¥ç”¨jeståˆ¤æ–­è°ƒç”¨æ¬¡æ•°ï¼Œè¿™é‡Œç›´æ¥ç”¨findAllByTextå°±å¯ä»¥ä¸ç”¨jest.fn()ã€‚</p>
<p>ç”±äºæˆ‘ä»¬ä¸å…³å¿ƒProductCardçš„ç»†èŠ‚ï¼Œæ‰€ä»¥mockè¿™ä¸ªç»„ä»¶æ—¶ï¼Œå¯ä»¥ç»™ä¸€ä¸ªç©ºçš„div</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;render, screen&#125; <span class="keyword">from</span> <span class="string">&#x27;@testing-library/react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ProductListPage</span> <span class="keyword">from</span> <span class="string">&#x27;../pages/ProductListPage/ProductListPage.jsx&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@testing-library/jest-dom&#x27;</span></span><br><span class="line"></span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;../components/ProductCard/ProductCard&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>mockModuleName<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;ProductListPage&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">test</span>(<span class="string">&#x27;renders product list heading&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ProductListPage</span> /&gt;</span></span>);</span><br><span class="line">        <span class="keyword">const</span> headingElement = screen.<span class="title function_">getByRole</span>(<span class="string">&#x27;heading&#x27;</span>, &#123; <span class="attr">level</span>: <span class="number">1</span> &#125;);</span><br><span class="line">        <span class="title function_">expect</span>(headingElement).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">        <span class="title function_">expect</span>(headingElement).<span class="title function_">toHaveTextContent</span>(<span class="regexp">/Product List/i</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">test</span>(<span class="string">&#x27;renders at least 15 product cards&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">ProductListPage</span> /&gt;</span></span>);</span><br><span class="line">        <span class="keyword">const</span> productCards = <span class="keyword">await</span> screen.<span class="title function_">findAllByText</span>(<span class="string">&#x27;mockModuleName&#x27;</span>);</span><br><span class="line">        <span class="title function_">expect</span>(productCards.<span class="property">length</span>).<span class="title function_">toBeGreaterThanOrEqual</span>(<span class="number">15</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ­å»ºä¸€ä¸ªå‰ç«¯é¡¹ç›®</li>
</ol>
<p>ç”¨Viteæ­å»ºï¼Œæ³¨æ„ç»Ÿä¸€è¯­è¨€typescript&#x2F;javascriptï¼Œä»¥åŠåŒ…ç®¡ç†å™¨å¯ä»¥ç”¨æœ€æ–°çš„pnpmã€‚package.jsonçœ‹ä¸Šå»åƒåç«¯çš„build.gradleã€‚ æµ‹è¯•é…ç½®çš„æ˜¯Jestï¼Œå®‰è£…åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š å¹¶ä¸”æ›´æ–°package.jsonå³å¯ï¼Œ æ— éœ€å†é…ç½®ä»€ä¹ˆæµ‹è¯•é…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@testing-library/jest-dom&#x27;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>è¯­è¨€å…±å­˜</li>
</ol>
<p>æˆ‘ç”¨viteæ­å»ºçš„æ˜¯typescript, å…¥å£æ–‡ä»¶ä¹Ÿæ˜¯typescript(æˆ‘æŠŠmain.tsxæ”¹æˆäº†index.tsx)ã€‚ ä½†ä¹‹åçš„pageç­‰æˆ‘éƒ½ç”¨çš„jsx, åœ¨å…¥å£æ–‡ä»¶å¼•å…¥æ—¶å‘ç°tsxå¼•å…¥ä¸äº†jsxï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ“ä½œï¼Œä¸å¿…å°†tsxæ”¹æˆjsxï¼Œè€Œæ˜¯å…±å­˜ï¼š <a target="_blank" rel="noopener" href="https://blog.csdn.net/yu359697395/article/details/78585267">https://blog.csdn.net/yu359697395/article/details/78585267</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">**&#123;</span><br><span class="line"><span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;outDir&quot;</span>: <span class="string">&quot;./built&quot;</span>,</span><br><span class="line"><span class="string">&quot;allowJs&quot;</span>: <span class="literal">true</span>,        <span class="comment">//</span></span><br><span class="line"><span class="string">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;include&quot;</span>: [</span><br><span class="line"><span class="string">&quot;./src/**/*&quot;</span></span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>ä»€ä¹ˆæ˜¯ç»„ä»¶ ä»€ä¹ˆæ˜¯props</li>
</ol>
<p>å‡½æ•°ç»„ä»¶ï¼šå‡½æ•°ç»„ä»¶æ˜¯æ— çŠ¶æ€çš„,æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•,åªè´Ÿè´£æ¥æ”¶æ•°æ®(props)å¹¶æ¸²æŸ“UI</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç®­å¤´å‡½æ•°å®šä¹‰çš„ç»„</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ProductListPage</span> = (<span class="params"></span>) =&gt; &#123;...&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ React ä¸­ï¼Œæˆ‘ä»¬ä¸åº”è¯¥ç›´æ¥ä¿®æ”¹çŠ¶æ€å˜é‡ï¼Œè€Œæ˜¯ä½¿ç”¨Â <strong><code>setState</code></strong>Â æˆ–Â <strong><code>useState</code></strong>Â æä¾›çš„æ›´æ–°å‡½æ•°æ¥æ›´æ–°çŠ¶æ€ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹çŠ¶æ€å˜é‡ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿çŠ¶æ€çš„æ›´æ–°æ˜¯å¯æ§çš„ï¼Œå¹¶ä¸” React å¯ä»¥æ­£ç¡®åœ°å¤„ç†é‡æ–°æ¸²æŸ“ã€‚</p>
<ol start="6">
<li>åˆ†é¡µå±•ç¤º</li>
</ol>
<p>æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œå½“ currentPage çŠ¶æ€æ›´æ–°åï¼ŒReact ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œä½¿ç”¨æ–°çš„ currentPage å€¼è®¡ç®—å‡ºæ–°çš„ startIndexã€endIndex å’Œ currentProductsã€‚æ‰€ä»¥æ¯é¡µå±•ç¤ºçš„å†…å®¹ä¸ä¸€æ ·</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ProductListPage</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">//å˜é‡currentPageåˆå§‹å€¼ä¸º1  å‡½æ•°setCurrentPageç”¨äºæ›´æ–°currentPage</span></span><br><span class="line">    <span class="keyword">const</span> [currentPage, setCurrentPage] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//æ¯é¡µå±•ç¤ºçš„äº§å“æ•°é‡</span></span><br><span class="line">    <span class="keyword">const</span> itemsPerPage = <span class="number">5</span>;</span><br><span class="line">    <span class="comment">//å‘ä¸Šå–æ•´ é¡µæ•°</span></span><br><span class="line">    <span class="keyword">const</span> totalPages = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(products.<span class="property">length</span> / itemsPerPage);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> startIndex = (currentPage - <span class="number">1</span>) * itemsPerPage;</span><br><span class="line">    <span class="keyword">const</span> endIndex = startIndex + itemsPerPage;</span><br><span class="line">    <span class="comment">//åˆ‡ç‰‡</span></span><br><span class="line">    <span class="keyword">const</span> currentProducts = products.<span class="title function_">slice</span>(startIndex, endIndex);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handlePageChange</span> = (<span class="params">pageNumber</span>) =&gt; &#123;</span><br><span class="line">        <span class="comment">// ä¼šæ›´æ–°currentPage,å½“ currentPage çŠ¶æ€æ›´æ–°åï¼ŒReact ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œä½¿ç”¨æ–°çš„ currentPage å€¼è®¡ç®—å‡ºæ–°çš„ startIndexã€endIndex å’Œ currentProductsã€‚</span></span><br><span class="line">        <span class="title function_">setCurrentPage</span>(pageNumber);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;product-list-page&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&quot;product-list-heading&quot;</span>&gt;</span>Product List<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;product-list-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;currentProducts.map((product) =&gt; (</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">ProductCard</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">key</span>=<span class="string">&#123;product.id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">product</span>=<span class="string">&#123;product&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">data-testid</span>=<span class="string">&quot;product-card&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    /&gt;</span></span></span><br><span class="line"><span class="language-xml">                ))&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*åˆ†é¡µæŒ‰é’®*/&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;Array.from(&#123; length: totalPages &#125;, (_, i) =&gt; (</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">key</span>=<span class="string">&#123;i</span> + <span class="attr">1</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handlePageChange(i + 1)&#125;</span></span><br><span class="line"><span class="language-xml">                        className=&#123;currentPage === i + 1 ? &#x27;active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                    &gt;</span></span><br><span class="line"><span class="language-xml">                        &#123;i + 1&#125;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                ))&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>npm installä¼šæŠŠæ‰€æœ‰importçš„ä¸œè¥¿éƒ½installå—ï¼Ÿ<br>å¦‚æœä½ å¯¼å…¥çš„æ¨¡å—æ²¡æœ‰åœ¨package.jsonä¸­åˆ—å‡º,é‚£ä¹ˆnpm installå°†ä¸ä¼šå®‰è£…å®ƒã€‚ä½ éœ€è¦æ‰‹åŠ¨å°†è¯¥æ¨¡å—æ·»åŠ åˆ°dependenciesæˆ–devDependenciesä¸­,ç„¶åå†è¿è¡Œnpm installã€‚</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://anne-aaa.github.io/2024/05/21/%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%81%9A%E5%89%8D%E7%AB%AF%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" data-id="clwkeb9vm00015wpo2ot47rn8" data-title="å‰ç«¯é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-è¯»ä¹¦ç¬”è®°" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/21/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2024-05-20T16:00:00.000Z" itemprop="datePublished">2024-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/21/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">ã€ŠSpring 4.x ä¼ä¸šåº”ç”¨å¼€å‘å®æˆ˜ã€‹è¯»ä¹¦ç¬”è®°</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ç¬¬ä¸€ç« "><a href="#ç¬¬ä¸€ç« " class="headerlink" title="ç¬¬ä¸€ç« "></a>ç¬¬ä¸€ç« </h1><p>æºä»£ç ï¼š<a target="_blank" rel="noopener" href="https://github.com/seriouszyx/LearnSpring/tree/master/source%20code">https://github.com/seriouszyx/LearnSpring/tree/master/source%20code</a><br><a target="_blank" rel="noopener" href="http://iteye.com/">http://iteye.com</a></p>
<h5 id="ä¸ºä»€ä¹ˆäº‘çš„å…´èµ·ä½¿å¾—æ¶ˆé™¤å¼€å‘è€…å’Œè¿è¥è€…çš„éš”é˜‚æ›´é‡è¦ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆäº‘çš„å…´èµ·ä½¿å¾—æ¶ˆé™¤å¼€å‘è€…å’Œè¿è¥è€…çš„éš”é˜‚æ›´é‡è¦ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆäº‘çš„å…´èµ·ä½¿å¾—æ¶ˆé™¤å¼€å‘è€…å’Œè¿è¥è€…çš„éš”é˜‚æ›´é‡è¦ï¼Ÿ"></a>ä¸ºä»€ä¹ˆäº‘çš„å…´èµ·ä½¿å¾—æ¶ˆé™¤å¼€å‘è€…å’Œè¿è¥è€…çš„éš”é˜‚æ›´é‡è¦ï¼Ÿ</h5><p>ä»€ä¹ˆæ˜¯è¿è¥è€…ï¼Ÿ</p>
<ul>
<li>ä¼ ç»Ÿä¸Š,å¼€å‘è€…å’Œè¿è¥è€…æ˜¯åˆ†å¼€çš„ä¸¤ä¸ªè§’è‰²ã€‚å¼€å‘è€…å®Œæˆåº”ç”¨ç¨‹åºå¼€å‘å,å°±æŠŠä»£ç äº¤ç»™è¿è¥è€…ã€‚è¿è¥è€…éœ€è¦å°†ä»£ç éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š,å¹¶è´Ÿè´£åç»­çš„ç³»ç»Ÿè¿ç»´å·¥ä½œã€‚</li>
</ul>
<ol>
<li><p>äº‘ç¯å¢ƒä¸‹åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§å¢åŠ ã€‚ç°ä»£è½¯ä»¶é¡¹ç›®é€šå¸¸ä¾èµ–æ•°ç™¾ä¸ªå¤–éƒ¨ä¾èµ–é¡¹å’Œå¤šä¸ªå…³é”®æœåŠ¡,è¿è¡Œåœ¨äº‘ç«¯ã€‚å¼€å‘è€…éœ€è¦ç†Ÿæ‚‰å’Œç®¡ç†å¤§é‡äº‘æœåŠ¡ã€å·¥å…·å’Œå¹³å°,å·¥ä½œè´Ÿæ‹…åŠ é‡ã€‚è¿™å°±éœ€è¦å¼€å‘è€…å’Œè¿è¥è€…å¯†åˆ‡åä½œ,å…±åŒåˆ†æ‹…è´£ä»»ã€‚</p>
</li>
<li><p>DevOpsæ–‡åŒ–çš„å…´èµ·ã€‚å½“ä»Šç§‘æŠ€å…¬å¸æ™®éé‡‡ç”¨â€å¼€å‘è€…å…¨æƒè´Ÿè´£â€çš„DevOpsæ–‡åŒ–,å¼€å‘è€…ä¸ä»…è´Ÿè´£ç¼–ç ,è¿˜å‚ä¸æµ‹è¯•ã€éƒ¨ç½²ã€ç»´æŠ¤ç­‰ç¯èŠ‚ã€‚è¿™ç§å…±åŒè´£ä»»æ¨¡å¼è¦æ±‚å¼€å‘è€…å’Œè¿è¥è€…çš„è§’è‰²é«˜åº¦èåˆã€‚</p>
</li>
</ol>
<h5 id="ä»€ä¹ˆåŠŸèƒ½ç”¨ä¼ ç»Ÿçš„OOPä¸æ˜“å®ç°ï¼Œç”¨AOPå´å¯ä»¥è½»æ¾åº”å¯¹ï¼Ÿ"><a href="#ä»€ä¹ˆåŠŸèƒ½ç”¨ä¼ ç»Ÿçš„OOPä¸æ˜“å®ç°ï¼Œç”¨AOPå´å¯ä»¥è½»æ¾åº”å¯¹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆåŠŸèƒ½ç”¨ä¼ ç»Ÿçš„OOPä¸æ˜“å®ç°ï¼Œç”¨AOPå´å¯ä»¥è½»æ¾åº”å¯¹ï¼Ÿ"></a>ä»€ä¹ˆåŠŸèƒ½ç”¨ä¼ ç»Ÿçš„OOPä¸æ˜“å®ç°ï¼Œç”¨AOPå´å¯ä»¥è½»æ¾åº”å¯¹ï¼Ÿ</h5><ul>
<li>é¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)ä¸å¤ªæ“…é•¿å¤„ç†çš„æ˜¯ä¸€äº›ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ— å…³,ä½†åˆéœ€è¦åœ¨å¤šä¸ªæ¨¡å—ä¸­é‡å¤å‡ºç°çš„ä»£ç ,æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€æ¨ªåˆ‡å…³æ³¨ç‚¹â€ã€‚è€Œé¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œè¯ç”Ÿçš„ã€‚ AOPä¸»è¦åº”ç”¨åœºæ™¯åŒ…æ‹¬æ—¥å¿—è®°å½•,æ€§èƒ½ç»Ÿè®¡,å®‰å…¨æ§åˆ¶,äº‹åŠ¡å¤„ç†,å¼‚å¸¸å¤„ç†ç­‰ç­‰ã€‚â€è¿™äº›åŠŸèƒ½è™½ç„¶ä¸æ˜¯æ ¸å¿ƒä¸šåŠ¡é€»è¾‘,ä½†åˆéœ€è¦åœ¨è®¸å¤šæ¨¡å—ä¸­é‡å¤å®ç°,ä½¿ç”¨ä¼ ç»ŸOOPçš„åšæ³•å°±ä¼šå¯¼è‡´ä»£ç çš„å†—ä½™å’Œä½å†…èšã€‚</li>
</ul>
<p>IOCå’ŒAOPæ˜¯Springä»¥æ¥çš„æ ¹æœ¬</p>
<ul>
<li>ä¼ ç»Ÿç¼–ç¨‹ç”¨newæ¥åˆ›å»ºï¼Œç°åœ¨äº¤ç»™Springå®¹å™¨æ³¨å…¥ã€‚</li>
<li>ä¼ ç»Ÿç¼–ç¨‹ä¸­,å¯¹è±¡åˆ›å»ºå¯¹è±¡,å¹¶ä¸”è´Ÿè´£å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚è€Œåœ¨IOCæ¨¡å¼ä¸‹,ç”±å®¹å™¨æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºã€åˆå§‹åŒ–ä»¥åŠå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚å¯¹è±¡æœ¬èº«åªéœ€è¦æä¾›æ ‡å‡†çš„æ„é€ å‡½æ•°å³å¯ã€‚<br>![[Pasted image 20240508151528.png]]</li>
</ul>
<h5 id="æ•°æ®è®¿é—®å’Œé›†æˆï¼š"><a href="#æ•°æ®è®¿é—®å’Œé›†æˆï¼š" class="headerlink" title="æ•°æ®è®¿é—®å’Œé›†æˆï¼š"></a>æ•°æ®è®¿é—®å’Œé›†æˆï¼š</h5><p>æ•°æ®æœ‰å¤šç§è¡¨ç°å½¢å¼ï¼Œå¦‚æ•°æ®è¡¨ã€XMLã€æ¶ˆæ¯ã€‚æ¯ç§æ•°æ®å½¢å¼æ‹¥æœ‰ä¸åŒçš„æ•°æ®è®¿é—®æŠ€æœ¯ï¼ˆæ•°æ®è¡¨çš„è®¿é—®å¯ä»¥ç›´æ¥é€šè¿‡JDBCï¼ŒJOOQï¼Œä¹Ÿå¯ä»¥é€šè¿‡Hibernateæˆ–MyBatisï¼‰</p>
<ul>
<li>è¿™äº›éƒ½æ˜¯ä¸åŒçš„å®ç°æŠ€æœ¯ï¼Œä½†æ˜¯åŒæ ·çš„è§£å†³é—®é¢˜ã€‚æ¯”å¦‚ä¸åŒçš„æµ‹è¯•æ¡†æ¶</li>
<li>Springå»ºç«‹èµ·äº†å’Œæ•°æ®å½¢å¼åŠè®¿é—®æŠ€æœ¯æ— å…³çš„ç»Ÿä¸€çš„DAOå±‚<br>eg.   é¦–å…ˆ,å®šä¹‰ä¸€ä¸ªæŠ€æœ¯æ— å…³çš„DAOæ¥å£:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123; List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>; User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span>; <span class="comment">// ... &#125;</span></span><br></pre></td></tr></table></figure>
  ç„¶å,ä½¿ç”¨JOOQå®ç°è¿™ä¸ªDAOæ¥å£</li>
</ul>
<h2 id="ç¬¬äºŒç« "><a href="#ç¬¬äºŒç« " class="headerlink" title="ç¬¬äºŒç« "></a>ç¬¬äºŒç« </h2><p>åŸºäºSpringçš„Webåº”ç”¨</p>
<p>JSPæ˜¯ä¸€ç§åŠ¨æ€é¡µé¢ï¼Œæ˜¯ä¼ ç»Ÿçš„MVCï¼Œè¦è¿”å›ç»™æµè§ˆå™¨çš„åŠ¨æ€é¡µé¢ã€‚<br>ä»€ä¹ˆæ˜¯Webå®¹å™¨ï¼Ÿ</p>
<ol>
<li>Webå®¹å™¨èƒ½å¤Ÿè§£æå¹¶æ‰§è¡ŒåŠ¨æ€èµ„æº(å¦‚JSPã€Servlet),è€Œä¸ä»…ä»…æ˜¯è¿”å›é™æ€HTMLé¡µé¢ã€‚</li>
<li>å¸¸è§çš„Webå®¹å™¨æœ‰Tomcatã€Jettyç­‰,å®ƒä»¬é€šå¸¸ä»¥åµŒå…¥å¼çš„æ–¹å¼è¿è¡Œåœ¨åº”ç”¨ç¨‹åºä¸­ã€‚</li>
<li>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­,è½»é‡çº§çš„Webå®¹å™¨(å¦‚Tomcat)è¢«å¹¿æ³›ä½¿ç”¨,å› ä¸ºå®ƒä»¬å ç”¨è¾ƒå°‘èµ„æº,æ˜“äºéƒ¨ç½²å’Œé›†æˆã€‚</li>
</ol>
<p>Jetty</p>
<ul>
<li>IDEAçš„å…è´¹ç¤¾åŒºç‰ˆæœ¬æœ¬èº«ä¸ç›´æ¥æ”¯æŒå¼€å‘Webé¡¹ç›®,éœ€è¦é¢å¤–é…ç½®WebæœåŠ¡å™¨ç¯å¢ƒã€‚è€ŒJettyä½œä¸ºä¸€ä¸ªè½»é‡çº§çš„åµŒå…¥å¼WebæœåŠ¡å™¨,å¯ä»¥å¾ˆæ–¹ä¾¿åœ°é›†æˆåˆ°IDEAä¸­,ä¸ºWebé¡¹ç›®æä¾›è¿è¡Œç¯å¢ƒ.</li>
<li>ä¸ä¼ ç»Ÿçš„WebæœåŠ¡å™¨(å¦‚Tomcat)ç›¸æ¯”,Jettyæ›´åŠ è½»é‡çº§,å ç”¨ç³»ç»Ÿèµ„æºæ›´å°‘,å¯åŠ¨é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚è¿™ä½¿å¾—åœ¨å¼€å‘é˜¶æ®µä½¿ç”¨Jettyæ›´åŠ é«˜æ•ˆ</li>
</ul>
<p>Springçš„å£°æ˜å¼äº‹åŠ¡</p>
<ul>
<li>Springçš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†å°±åƒæ˜¯å®‰æ’äº†ä¸€ä¸ªâ€ç›‘å·¥â€åœ¨æ—è¾¹ç›‘ç£,ç¡®ä¿ä»˜æ¬¾çš„æ¯ä¸ªæ­¥éª¤éƒ½æ­£ç¡®æ‰§è¡Œã€‚å¦‚æœä¸­é—´å‡ºç°ä»»ä½•é—®é¢˜,è¿™ä¸ªâ€ç›‘å·¥â€ä¼šç«‹å³åœæ­¢åç»­æ­¥éª¤,å¹¶è®©æ•´ä¸ªè¿‡ç¨‹å›åˆ°æœ€åˆçŠ¶æ€,é¿å…æ•°æ®ä¸ä¸€è‡´ã€‚ä½¿ç”¨Springå£°æ˜å¼äº‹åŠ¡,æˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨ç¼–å†™ç›‘æ§å’Œå›æ»šäº‹åŠ¡çš„ä»£ç ,åªéœ€åœ¨å…³é”®çš„ä¸šåŠ¡æ–¹æ³•ä¸Šæ ‡æ³¨@Transactionalæ³¨è§£,Springå°±ä¼šè‡ªåŠ¨ä¸ºè¿™äº›æ–¹æ³•å¢åŠ äº‹åŠ¡ç®¡ç†çš„èƒ½åŠ›,ç¡®ä¿äº‹åŠ¡eitherå…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥å›æ»š,ä¸ä¼šå‡ºç°ä¸­é—´çŠ¶æ€ã€‚</li>
</ul>
<h2 id="ç¬¬ä¸‰ç« "><a href="#ç¬¬ä¸‰ç« " class="headerlink" title="ç¬¬ä¸‰ç« "></a>ç¬¬ä¸‰ç« </h2><p>Spring Boot</p>
<ul>
<li>å†…åµŒTomcatå’ŒJettyå®¹å™¨ï¼Œä¸éœ€è¦éƒ¨ç½²WAR æ–‡ä»¶åˆ°Webå®¹å™¨å°±å¯ç‹¬ç«‹è¿è¡Œ åº”ç”¨</li>
</ul>
<p>jaråŒ…å’ŒwaråŒ…æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦å°†ç¨‹åºæ‰“åŒ…æˆä»–ä»¬ï¼Ÿ</p>
<h5 id="è¿ç»´åŠŸèƒ½"><a href="#è¿ç»´åŠŸèƒ½" class="headerlink" title="è¿ç»´åŠŸèƒ½"></a>è¿ç»´åŠŸèƒ½</h5><ul>
<li>å½“åº”ç”¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œéœ€è¦å„ç§è¿ç»´ç›¸å…³çš„åŠŸèƒ½ çš„æ”¯æŒï¼Œå¦‚ç›‘æ§åº”ç”¨çš„å„ç§æ€§èƒ½æŒ‡æ ‡ã€è¿è¡Œä¿¡æ¯å’Œåº”ç”¨çŠ¶æ€ç­‰ã€‚SpringBoot å¯¹è¿™äº›è¿ç»´ç›‘æ§ç›¸å…³çš„ç±»åº“ è¿› è¡Œ äº†æ•´ åˆ ï¼Œ å½¢ æˆ äº†ä¸€ ä¸ªåŠŸ èƒ½ å®Œ å¤‡ å’Œ å¯ å®š åˆ¶ çš„ å¯ åŠ¨ å™¨ ï¼Œ ç§° ä¸º A c t u a t o r ã€‚<br>åŸºäºSpring Bootåº”ç”¨ï¼Œæ·»åŠ ç›‘æ§åŠŸèƒ½éå¸¸ç®€å•ï¼Œåªéœ€åœ¨åº”ç”¨çš„pom.xml æ–‡ä»¶ä¸­æ·» åŠ spring-boot-starter-actuator ä¾èµ–å³å¯</li>
<li>Spring Boot é»˜è®¤æä¾›çš„å¥åº·æ£€æŸ¥å…³é”®æœåŠ¡ã€‚è¿™äº›æœåŠ¡éƒ½å¯ä»¥åœ¨ application.properties çš„management .health. *é€‰é¡¹ä¸­è¿›è¡Œé…ç½®</li>
</ul>
<p>pom.xmlä¸application.properties</p>
<ul>
<li><ol>
<li>pom.xmlæ–‡ä»¶: ç›¸å½“äºbuild.gradle<br>å®ƒæ˜¯Mavené¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶,ç”¨äºå®šä¹‰é¡¹ç›®çš„æ„å»ºé…ç½®ã€‚<br> pom.xmlæ–‡ä»¶ä¸­åŒ…å«äº†é¡¹ç›®çš„ä¾èµ–åº“ã€æ’ä»¶ã€æ„å»ºç”Ÿå‘½å‘¨æœŸç­‰ä¿¡æ¯ã€‚</li>
</ol>
</li>
<li><ol start="2">
<li><strong>application.propertiesæ–‡ä»¶</strong>:<br>å®ƒæ˜¯Spring Bootç­‰Javaåº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶,ç”¨äºé…ç½®åº”ç”¨ç¨‹åºçš„è¿è¡Œæ—¶å‚æ•°ã€‚<br>application.propertiesæ–‡ä»¶ä¸­åŒ…å«äº†æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€æœåŠ¡å™¨ç«¯å£ã€æ—¥å¿—çº§åˆ«ç­‰é…ç½®é¡¹ã€‚</li>
</ol>
</li>
</ul>
<h2 id="ç¬¬å››ç« "><a href="#ç¬¬å››ç« " class="headerlink" title="ç¬¬å››ç« "></a>ç¬¬å››ç« </h2><p>IOCï¼š</p>
<ul>
<li>IOCè¿™ä¸ªæ¦‚å¿µä¸å¤Ÿæ¸…æ™°ï¼Œå³æŸ ä¸€æ¥åˆå…·ä½“å®ç°ç±»çš„é€‰æ‹©æ§åˆ¶æƒä»è°ƒç”¨ç±»ä¸­ç§»é™¤ï¼Œ è½¬äº¤ç»™ç¬¬ ä¸‰æ–¹å†³å®šï¼Œå³ç”±Springå®¹å™¨å€Ÿç”±Beané…ç½®æ¥è¿›è¡Œæ§åˆ¶ã€‚<br>DIï¼š</li>
<li>å› ä¸ºIoCç¡®å®ä¸å¤Ÿå¼€é—¨è§å±±ï¼Œå› æ­¤ä¸šç•Œæ›¾è¿›è¡Œäº†å¹¿æ³›çš„è®¨è®ºï¼Œæœ€ç»ˆè½¯ä»¶ç•Œçš„æ³°æ–—çº§ äººç‰©MartinFowler æå‡ºäº†DI (DependencyInjectionï¼Œä¾èµ–æ³¨å…¥)çš„æ¦‚å¿µç”¨æ¥ä»£æ›¿IoCï¼Œ å³è®©è°ƒç”¨ç±»å¯¹æŸä¸€æ¥åˆå®ç°ç±»çš„ä¾èµ–å…³ç³»ç”±ç¬¬ä¸‰æ–¹ (å®¹å™¨æˆ–åä½œç±»)æ³¨å…¥ï¼Œä»¥ç§»é™¤è°ƒç”¨ ç±» å¯¹ æŸ ä¸€æ¥ åˆ å® ç° ç±» çš„ ä¾ èµ– ã€‚ â€œ ä¾ èµ– æ³¨ å…¥ â€ è¿™ ä¸ª å è¯ æ˜¾ ç„¶ æ¯” â€œ æ§ åˆ¶ å è½¬ â€ ç›´ æ¥ æ˜ äº† ã€ æ˜“ äºç†è§£ã€‚</li>
</ul>
<p>æ„é€ æ³¨å…¥ ä¸ å±æ€§æ³¨å…¥ï¼š</p>
<ul>
<li>å¹¶éæ¯ä¸ªåœºæ™¯éƒ½éœ€è¦å®ƒçš„æ—¶å€™ï¼Œä¸æ„é€ æ³¨å…¥å®ƒå°±æ˜¾å¾—ä¸å¤ªå¦¥å½“ï¼Œäºæ˜¯ç”¨å±æ€§æ³¨å…¥ã€‚å±æ€§æ³¨å…¥å¯ä»¥æœ‰é€‰æ‹©åœ°é€šè¿‡Setter æ–¹æ³•å®Œæˆè°ƒç”¨ç±»æ‰€éœ€ä¾èµ–çš„æ³¨å…¥ï¼Œæ›´åŠ çµæ´»æ–¹ä¾¿ã€‚ ä¹Ÿå°±æ˜¯â€æŒ‰éœ€æ³¨å…¥â€<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ„é€ æ³¨å…¥é©å¸­çš„å…·ä½“é¥°æ¼”è€… </span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MoAttack</span> <span class="params">(GeLi geli)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.geli = geli;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å±æ€§æ³¨å…¥</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGeli</span> <span class="params">(GeLi geli)</span> &#123;</span><br><span class="line">thisgeli = geli;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>JVM</p>
<ul>
<li>JVMå°†Javaæºä»£ç ç¼–è¯‘æˆå­—èŠ‚ç ,ç„¶åå°†å­—èŠ‚ç è§£é‡Šæˆæœºå™¨ç ,ä»¥ä¾¿åœ¨ä¸åŒçš„å¹³å°ä¸Šè¿è¡Œã€‚è¿™ä½¿å¾—Javaç¨‹åºå¯ä»¥åœ¨ä¸åŒçš„å¹³å°ä¸Šè¿è¡Œ,è€Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ã€‚</li>
<li>JVMè£…è½½ç±»æ—¶ä½¿ç”¨ â€œå…¨ç›˜è´Ÿè´£å§”æ‰˜æœºåˆ¶â€ï¼Œâ€œ å…¨ç›˜è´Ÿè´£â€ æ˜¯æŒ‡å½“ä¸€ä¸ªClassLoader è£… è½½ ä¸€ ä¸ª ç±» æ—¶ ï¼Œ é™¤ é æ˜¾ å¼ åœ° ä½¿ ç”¨ å¦ä¸€ ä¸ª C l a s s L o a d e r ï¼Œ è¯¥ ç±» æ‰€ ä¾ èµ– åŠ å¼• ç”¨ çš„ ç±» ä¹Ÿ ç”± è¿™ ä¸ª ClassLoader è½½</li>
</ul>
<p>JaråŒ…</p>
<ul>
<li>jaråŒ…æ˜¯ç”±Javaè¯­è¨€ç¼–å†™çš„ç¨‹åº,å°†å…¶ç¼–è¯‘åçš„.classæ–‡ä»¶å’Œå…¶ä»–å¿…è¦èµ„æºæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶,ä»¥ä¾¿äºåˆ†å‘å’Œéƒ¨ç½²ã€‚</li>
</ul>
<p>ClassLoader:</p>
<ul>
<li>ç±»è£…è½½å™¨ å°±æ˜¯ å¯»æ‰¾ç±»çš„å­—èŠ‚ç æ–‡ä»¶å¹¶æ„é€  å‡º ç±» åœ¨ J V M å†… éƒ¨ è¡¨ ç¤º å¯¹ è±¡ çš„ ç»„ ä»¶ ã€‚ åœ¨ J a v a ä¸­ï¼Œç±»è£…è½½å™¨æŠŠä¸€ä¸ªç±»è£…å…¥J Mä¸­ã€‚</li>
</ul>
<p>JDKï¼š</p>
<ul>
<li>JDK(Java Development Kit)æ˜¯Javaè¯­è¨€çš„å¼€å‘å·¥å…·åŒ…,åŒ…å«äº†Javaç¼–è¯‘å™¨(å°†Javaæºä»£ç ç¼–è¯‘æˆ.classæ–‡ä»¶,ç„¶åæ‰§è¡Œè¿™äº›.classæ–‡ä»¶ã€‚)ã€Javaè¿è¡Œæ—¶ç¯å¢ƒ(æ‰§è¡ŒJavaç¨‹åº)å’Œå…¶ä»–å¼€å‘å·¥å…·(å¦‚debuggerã€profiler)ã€‚</li>
</ul>
<p>BeanFactory æ˜¯Spring æ¡†æ¶çš„åŸºç¡€è®¾ æ–½ï¼Œé¢å‘Spring æœ¬èº«:ApplicationContext é¢å‘ä½¿ç”¨Spring æ¡†æ¶çš„å¼€å‘è€…ï¼Œå‡ ä¹æ‰€æœ‰çš„ åº”ç”¨åœºåˆéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ApplicationContext è€Œéåº•å±‚çš„BeanFactory</p>
<h2 id="ç¬¬äº”ç« "><a href="#ç¬¬äº”ç« " class="headerlink" title="ç¬¬äº”ç« "></a>ç¬¬äº”ç« </h2><h5 id="1-ä¹¦ä¸­ç”¨åˆ°äº†1ï¸âƒ£é…ç½®æ–‡ä»¶æ¥å†™è¿™ä¸ªclassæ˜¯ä¸€ä¸ªbeanï¼Œä½†å®é™…é¡¹ç›®ä¸Šå¹¶æ²¡æœ‰è¿™æ ·åšï¼Œè€Œæ˜¯å¥½åƒç›´æ¥ç”¨2ï¸âƒ£æ³¨è§£å¼•å…¥ï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"><a href="#1-ä¹¦ä¸­ç”¨åˆ°äº†1ï¸âƒ£é…ç½®æ–‡ä»¶æ¥å†™è¿™ä¸ªclassæ˜¯ä¸€ä¸ªbeanï¼Œä½†å®é™…é¡¹ç›®ä¸Šå¹¶æ²¡æœ‰è¿™æ ·åšï¼Œè€Œæ˜¯å¥½åƒç›´æ¥ç”¨2ï¸âƒ£æ³¨è§£å¼•å…¥ï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ" class="headerlink" title="1. ä¹¦ä¸­ç”¨åˆ°äº†1ï¸âƒ£é…ç½®æ–‡ä»¶æ¥å†™è¿™ä¸ªclassæ˜¯ä¸€ä¸ªbeanï¼Œä½†å®é™…é¡¹ç›®ä¸Šå¹¶æ²¡æœ‰è¿™æ ·åšï¼Œè€Œæ˜¯å¥½åƒç›´æ¥ç”¨2ï¸âƒ£æ³¨è§£å¼•å…¥ï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"></a>1. ä¹¦ä¸­ç”¨åˆ°äº†1ï¸âƒ£é…ç½®æ–‡ä»¶æ¥å†™è¿™ä¸ªclassæ˜¯ä¸€ä¸ªbeanï¼Œä½†å®é™…é¡¹ç›®ä¸Šå¹¶æ²¡æœ‰è¿™æ ·åšï¼Œè€Œæ˜¯å¥½åƒç›´æ¥ç”¨2ï¸âƒ£æ³¨è§£å¼•å…¥ï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h5><pre><code>- ä»Spring 2.5å¼€å§‹,å¼•å…¥äº†åŸºäºæ³¨è§£(@Annotation)çš„é…ç½®æ–¹å¼ã€‚å¼€å‘è€…å¯ä»¥ç›´æ¥åœ¨Beanç±»ä¸Šä½¿ç”¨@Componentã€@Serviceã€@Repositoryã€@Controllerç­‰æ³¨è§£å°†å…¶å£°æ˜ä¸ºBean,è€Œä¸éœ€è¦åœ¨XMLä¸­é‡å¤é…ç½®ã€‚è¿™ç§æ–¹å¼æ›´åŠ ç®€æ´ã€é«˜æ•ˆ,ä¹Ÿæ˜¯å½“å‰æ¨èçš„é…ç½®æ–¹å¼ã€‚
</code></pre>
<p>eg.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123; </span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getUserName</span><span class="params">(<span class="type">int</span> userId)</span> &#123; <span class="comment">// æŸ¥è¯¢ç”¨æˆ·åçš„é€»è¾‘ return &quot;John Doe&quot;; &#125; </span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡<code>@Service</code>æ³¨è§£,Springå°±å¯ä»¥è‡ªåŠ¨æ‰«æåˆ°è¿™ä¸ªç±»,å¹¶å°†å…¶æ³¨å†Œä¸ºä¸€ä¸ªBean,åç§°é»˜è®¤ä¸ºâ€userServiceâ€(ç±»åçš„ç¬¬ä¸€ä¸ªå­—æ¯å°å†™)ã€‚æ¥ä¸‹æ¥,å¦‚æœæˆ‘ä»¬æœ‰å¦ä¸€ä¸ªç»„ä»¶éœ€è¦ä½¿ç”¨UserService,å¯ä»¥ä½¿ç”¨<code>@Autowired</code>æ³¨è§£è‡ªåŠ¨æ³¨å…¥:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired; <span class="keyword">import</span> org.springframework.stereotype.Component; </span><br><span class="line"><span class="meta">@Component</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserService userService;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printUserName</span><span class="params">(<span class="type">int</span> userId)</span> &#123; </span><br><span class="line"> <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> userService.getUserName(userId); System.out.println(<span class="string">&quot;User name: &quot;</span> + userName); </span><br><span class="line"> &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><code>@Component</code>æ³¨è§£å°†<code>UserController</code>æ ‡è®°ä¸ºä¸€ä¸ªBeanã€‚</li>
<li><code>@Autowired</code>æ³¨è§£è‡ªåŠ¨å°†<code>UserService</code>çš„Beanæ³¨å…¥åˆ°<code>userService</code>å­—æ®µä¸­ã€‚</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼,Springå¯ä»¥è‡ªåŠ¨æ‰«æå’Œæ³¨å†Œæ‰€æœ‰æ ‡è®°äº†<code>@Component</code>ã€<code>@Service</code>ç­‰æ³¨è§£çš„ç±»ä½œä¸ºBean,å¹¶è‡ªåŠ¨æ³¨å…¥å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>
<p>å¦‚ æœ å®¹ å™¨ ä¸­ æœ‰ ä¸€ ä¸ª ä»¥ ä¸ŠåŒ¹ é… çš„ B e a n æ—¶ ï¼Œ åˆ™ å¯ ä»¥ é€š è¿‡ @ Q u a l i f i e r æ³¨ è§£ é™ å®š B e a n çš„ å ç§°ï¼Œ<br>ä¸€èˆ¬ æƒ… å†µ ä¸‹ ï¼Œ åœ¨ S p r i n g å®¹ å™¨ ä¸­ å¤§ éƒ¨ åˆ† B e a n éƒ½ æ˜¯ å• å® ä¾‹ çš„ ï¼Œ æ‰€ ä»¥ ä¸€èˆ¬ æ—  é¡» é€š è¿‡@Repositoryã€@Service ç­‰æ³¨è§£çš„value å±æ€§ä¸ºBean æŒ‡å®šåç§°ï¼Œä¹Ÿæ— é¡»ä½¿ç”¨@Qualifier æ³¨è§£æŒ‰åç§°è¿›è¡Œæ³¨å…¥ã€‚</p>
<p>è¿˜å¯ä»¥é€šè¿‡3ï¸âƒ£@Configurationæ¥ä¸ºä¸€ä¸ªPOJO æ ‡æ³¨ä¸ºé…ç½®ç±»ï¼Œé‡Œé¢å°±å¯ä»¥å®šä¹‰@Bean(æ¯”å¦‚Service Bean, Dao Bean)ï¼Œä»¥åŠBeançš„å®ä¾‹åŒ–é€»è¾‘</p>
<h5 id="2-å…³äºBeançš„ä½œç”¨åŸŸï¼š"><a href="#2-å…³äºBeançš„ä½œç”¨åŸŸï¼š" class="headerlink" title="2. å…³äºBeançš„ä½œç”¨åŸŸï¼š"></a>2. å…³äºBeançš„ä½œç”¨åŸŸï¼š</h5><p>é¦–å…ˆè¦ç†è§£â€å•ä¾‹æ¨¡å¼â€ï¼Œä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œé€‚åˆç”¨æ¥ç®¡ç†å…±äº«èµ„æºã€‚s i n g l e t o n çš„ B e a n åœ¨ åŒ ä¸€S p r i n g I o C å®¹ å™¨ ä¸­ åª æœ‰ ä¸€ä¸ª å®ä¾‹ã€‚<br>S p r i n g çš„ A p p l i c a t i o n C o n t e x t å®¹ å™¨ åœ¨ å¯ åŠ¨ æ—¶ ï¼Œè‡ª åŠ¨ å® ä¾‹ åŒ– æ‰€ æœ‰ s i n g l e t o n çš„Bean å¹¶ç¼“å­˜äºå®¹å™¨ä¸­ã€‚è™½ç„¶å¯åŠ¨æ—¶ä¼šèŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œä½†å®ƒå¸¦æ¥ä¸¤ä¸ªå¥½å¤„:é¦–å…ˆï¼Œå¯¹ Beanæå‰è¿›è¡Œå®ä¾‹åŒ–æ“ä½œä¼šåŠæ—©å‘ç°ä¸€äº›æ½œåœ¨çš„é…ç½®é—®é¢˜</p>
<p>åœ¨ é»˜ è®¤ æƒ… å†µ ä¸‹ï¼Œ S p r i n g å®¹ å™¨ åœ¨ å¯ åŠ¨ æ—¶ ä¸ å® ä¾‹ åŒ– p r o t o t y p e çš„ B e a n<br>requestä½œç”¨åŸŸ<br>é¡¾ å æ€ ä¹‰ ï¼Œ r e q u e s t ä½œ ç”¨ åŸŸ çš„ B e a n å¯¹ åº” ä¸€ä¸ª H T T P è¯· æ±‚ å’Œ ç”Ÿ å‘½ å‘¨ æœŸ</p>
<p>ä»€ä¹ˆåœºæ™¯ä¸‹ç”¨å•ä¾‹Bean,ä»€ä¹ˆåœºæ™¯ä¸‹ç”¨prototypeçš„beanï¼Ÿ</p>
<ul>
<li>æƒ³è±¡ä¸€ä¸‹,æˆ‘ä»¬æœ‰ä¸€ä¸ªå­¦æ ¡,å­¦æ ¡é‡Œæœ‰å¾ˆå¤šè€å¸ˆå’Œå­¦ç”Ÿã€‚æ¯ä¸ªè€å¸ˆéƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„æ•™å®¤,é‡Œé¢æœ‰ä¸€ä¸ªå°é»‘æ¿ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨å•ä¾‹beanæ¥è¡¨ç¤ºå°é»‘æ¿,é‚£å°±æ„å‘³ç€æ‰€æœ‰è€å¸ˆéƒ½å…±äº«åŒä¸€ä¸ªå°é»‘æ¿ã€‚è¿™æ ·çš„è¯,å¦‚æœå¼ è€å¸ˆåœ¨å°é»‘æ¿ä¸Šå†™äº†â€2+3&#x3D;5â€,æè€å¸ˆè¿‡æ¥ä¸Šè¯¾æ—¶,å°é»‘æ¿ä¸Šè¿˜æ˜¯æ˜¾ç¤ºâ€2+3&#x3D;5â€,è¿™å°±ä¼šé€ æˆæ··ä¹±ã€‚ç›¸å,å¦‚æœæˆ‘ä»¬ä½¿ç”¨session beanæ¥è¡¨ç¤ºå°é»‘æ¿,æ¯ä¸ªè€å¸ˆéƒ½ä¼šæœ‰è‡ªå·±ä¸“å±çš„å°é»‘æ¿ã€‚è¿™æ ·,å¼ è€å¸ˆåœ¨è‡ªå·±çš„å°é»‘æ¿ä¸Šå†™â€2+3&#x3D;5â€,æè€å¸ˆåœ¨è‡ªå·±çš„å°é»‘æ¿ä¸Šå†™â€5+7&#x3D;12â€,ä¸¤ä¸ªè€å¸ˆä¹‹é—´å°±ä¸ä¼šäº’ç›¸å½±å“äº†ã€‚</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://anne-aaa.github.io/2024/05/21/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" data-id="clwkeb9vo00035wpo1inff55q" data-title="ã€ŠSpring 4.x ä¼ä¸šåº”ç”¨å¼€å‘å®æˆ˜ã€‹è¯»ä¹¦ç¬”è®°" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">åç«¯</a></li></ul>

    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">åç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/" rel="tag">æ—¥å¸¸è®°å½•</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">å‰ç«¯</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 20px;">åç«¯</a> <a href="/tags/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/" style="font-size: 10px;">æ—¥å¸¸è®°å½•</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/05/24/backend/%E6%9E%B6%E6%9E%84/">æ¶æ„</a>
          </li>
        
          <li>
            <a href="/2024/05/21/Hexo+%20Github%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">Hexo+ Githubæ­å»ºä¸€ä¸ªä¸ªäººåšå®¢</a>
          </li>
        
          <li>
            <a href="/2024/05/21/%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%81%9A%E5%89%8D%E7%AB%AF%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/">å‰ç«¯é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜</a>
          </li>
        
          <li>
            <a href="/2024/05/21/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">ã€ŠSpring 4.x ä¼ä¸šåº”ç”¨å¼€å‘å®æˆ˜ã€‹è¯»ä¹¦ç¬”è®°</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Anne<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>